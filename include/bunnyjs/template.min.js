"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TEMPLATE_EVENT_INIT="init",TEMPLATE_EVENT_FORMAT_DATA="format_data",Template={_loadedTemplates:[],_dataVarName:"v",_dataAttrVarName:"av",define:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==this._loadedTemplates[e])return!1;var r=document.getElementById(e);if(null===r)return!1;var a=document.createDocumentFragment(),l=null;for(l="TABLE"===r.tagName?r.querySelector("tbody"):r;l.firstChild;)a.appendChild(l.firstChild);return this._loadedTemplates[e]={templateFragment:a,handlers:t,events:n,isTable:"TABLE"===r.tagName},!0},isTable:function(e){return this._loadedTemplates[e].isTable},create:function(e,t){var n={},r=[],a=this._dataVarName,l=this._dataAttrVarName;return void 0!==this._loadedTemplates[e]&&(n.id=e,n.content=this._loadedTemplates[e].templateFragment.cloneNode(!0),n.nodes=[].slice.call(n.content.childNodes,0),n.isTable="TABLE"===this._loadedTemplates[e].tagName,n.varElements=[],[].forEach.call(n.content.querySelectorAll("["+a+"]"),function(e){n.varElements[e.getAttribute(a)]=e}),n.attrVarElements=[],[].forEach.call(n.content.querySelectorAll("["+l+"]"),function(e){r=e.getAttribute(l).split(":"),n.attrVarElements[r[1]]={el:e,attr:r[0]}}),n.handlerElements=[],[].forEach.call(n.content.querySelectorAll("[data-handler]"),function(e){n.handlerElements.push(e)}),void 0!==t&&(n.relatedData=t),n)},parse:function(e,t){var n=Object.create(t);if(void 0===e||null===e)e=[];else if("object"!==("undefined"==typeof e?"undefined":_typeof(e)))return!1;void 0!==this._loadedTemplates[n.id].events[TEMPLATE_EVENT_FORMAT_DATA]&&(e=this._loadedTemplates[n.id].events[TEMPLATE_EVENT_FORMAT_DATA](e,n.relatedData)),n.escapedData=[];for(var r in e)n.escapedData[r]=this.nl2br(this.escape(e[r])),void 0!==n.varElements[r]&&(n.varElements[r].innerHTML=n.escapedData[r]),void 0!==n.attrVarElements[r]&&n.attrVarElements[r].el.setAttribute(n.attrVarElements[r].attr,e[r]);return n},escape:function(e){return String(e).replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},nl2br:function(e){return String(e).replace(/(\n)+/g,"<br>")},callHandlers:function(e){for(var t in e.handlerElements){var n=this._loadedTemplates[e.id].handlers[e.handlerElements[t].getAttribute("data-handler")];if(void 0===n)return!1;n(e.handlerElements[t],e.escapedData,e.nodes)}},append:function(e,t){if(null===t||void 0===t)return!1;var n=null;return n=this.isTable(e.id)?t.querySelector("tbody"):t,n.appendChild(e.content),this.callHandlers(e),e.nodes},insert:function(e,t,n){return this.append(this.parse(t,this.create(e)),n)},insertAll:function(e,t,n){for(var r=document.createDocumentFragment(),a=[],l=0;l<t.length;l++){var i=this.create(e);i=this.parse(t[l],i),r.appendChild(i.content),a.push(i)}var d=null;for(d=this.isTable(e)?n.querySelector("tbody"):n,d.appendChild(r),l=0;l<a.length;l++)this.callHandlers(a[l])},insertAdjacencyList:function(e,t,n,r,a,l){void 0!==r&&null!==r||(r="parent_id"),(void 0===l||null===l||"asc"!==l&&"desc"!==l)&&(l="asc");var i={_0:{}};i._0._rendered=!1,i._0.id=0;for(var d in t)i["_"+t[d].id]=t[d],i["_"+t[d].id]._rendered=!1;for(var d in t){var o=i["_"+t[d].id][r];void 0===i["_"+o]._children_ids&&(i["_"+o]._children_ids=[]),i["_"+o]._children_ids.push(t[d].id)}var s=document.createDocumentFragment(),c=[],u=function t(n,r){if(n._rendered===!1)if(n._rendered=!0,0===n.id)for(var l in n._children_ids)t(i["_"+n._children_ids[l]],r);else{var d=p(n),o=Template.create(e,d);if(o=Template.parse(n,o),c.push(o),void 0!==n._children_ids)for(var l in n._children_ids)null===o.content.querySelector("."+a),t(i["_"+n._children_ids[l]],o.content.querySelector("."+a));r.appendChild(o.content)}},p=function e(t){if(t.parent_id>0){var n={};return n=i["_"+t.parent_id],i["_"+t.parent_id].parent_id>0&&(n.parent=e(i["_"+t.parent_id])),n}};for(u(i._0,s),n.appendChild(s),d=0;d<c.length;d++)this.callHandlers(c[d])}};